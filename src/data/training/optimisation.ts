import type { TrainingQuestion } from './types';

const questions: TrainingQuestion[] = [
  // Level 1
  {
    id: 'optimisation-l1-q1',
    nodeId: 'optimisation',
    level: 1,
    title: 'Minimum of a quadratic',
    text: 'Find the minimum value of $y = x^2 - 8x + 20$.',
    hints: ['Differentiate and set equal to zero', '$\\frac{dy}{dx} = 2x - 8$'],
    answer: '$2x - 8 = 0 \\Rightarrow x = 4$. $y(4) = 16 - 32 + 20 = 4$. Minimum value is $4$.',
    marks: 2,
  },
  {
    id: 'optimisation-l1-q2',
    nodeId: 'optimisation',
    level: 1,
    title: 'Maximum product',
    text: 'Two positive numbers add to $10$. Find the numbers that maximise their product.',
    hints: ['Let the numbers be $x$ and $10 - x$', 'Maximise $P = x(10 - x)$'],
    answer: '$P = 10x - x^2$. $\\frac{dP}{dx} = 10 - 2x = 0 \\Rightarrow x = 5$. Both numbers are $5$.',
    marks: 3,
  },
  {
    id: 'optimisation-l1-q3',
    nodeId: 'optimisation',
    level: 1,
    title: 'Minimum sum',
    text: 'The sum of a positive number $x$ and its reciprocal is $S = x + \\frac{1}{x}$. Find the value of $x$ that minimises $S$.',
    hints: ['$\\frac{dS}{dx} = 1 - \\frac{1}{x^2}$'],
    answer: '$1 - \\frac{1}{x^2} = 0 \\Rightarrow x^2 = 1 \\Rightarrow x = 1$ (since $x > 0$). $S_{\\min} = 2$.',
    marks: 3,
  },
  {
    id: 'optimisation-l1-q4',
    nodeId: 'optimisation',
    level: 1,
    title: 'Which method?',
    text: 'Which step is NOT part of solving an optimisation problem using calculus?',
    hints: ['Think about the standard process'],
    answer: 'D',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Express the quantity to be optimised in terms of one variable', correct: false },
      { label: 'B', text: 'Differentiate and set the derivative equal to zero', correct: false },
      { label: 'C', text: 'Verify the nature of the stationary point', correct: false },
      { label: 'D', text: 'Integrate the function over the domain', correct: true },
    ],
  },
  // Level 2
  {
    id: 'optimisation-l2-q1',
    nodeId: 'optimisation',
    level: 2,
    title: 'Fencing problem',
    text: 'A farmer uses $60$ m of fencing to create a rectangular paddock against a river (no fence needed on the river side). Find the dimensions that maximise the area.',
    hints: ['Let width be $x$, then length $= 60 - 2x$', '$A = x(60 - 2x)$'],
    answer: '$A = 60x - 2x^2$. $\\frac{dA}{dx} = 60 - 4x = 0 \\Rightarrow x = 15$. Length $= 30$ m, width $= 15$ m. Max area $= 450$ m².',
    marks: 4,
  },
  {
    id: 'optimisation-l2-q2',
    nodeId: 'optimisation',
    level: 2,
    title: 'Maximum area of a rectangle',
    text: 'A rectangle has perimeter $40$ cm. Find the maximum area.',
    hints: ['Let length $= x$, width $= 20 - x$'],
    answer: '$A = x(20 - x) = 20x - x^2$. $\\frac{dA}{dx} = 20 - 2x = 0 \\Rightarrow x = 10$. Max area $= 100$ cm².',
    marks: 3,
  },
  {
    id: 'optimisation-l2-q3',
    nodeId: 'optimisation',
    level: 2,
    title: 'Minimum material',
    text: 'An open-top box has a square base of side $x$ cm and volume $32$ cm³. Find $x$ to minimise the surface area.',
    hints: ['$V = x^2 h = 32$, so $h = \\frac{32}{x^2}$', '$S = x^2 + 4xh$'],
    answer: '$S = x^2 + 4x \\cdot \\frac{32}{x^2} = x^2 + \\frac{128}{x}$. $\\frac{dS}{dx} = 2x - \\frac{128}{x^2} = 0 \\Rightarrow x^3 = 64 \\Rightarrow x = 4$ cm.',
    marks: 4,
  },
  {
    id: 'optimisation-l2-q4',
    nodeId: 'optimisation',
    level: 2,
    title: 'Minimum distance',
    text: 'Find the point on the curve $y = \\sqrt{x}$ closest to the point $(3, 0)$.',
    hints: ['Minimise $D^2 = (x - 3)^2 + x$', 'Minimising $D^2$ is equivalent to minimising $D$'],
    answer: '$D^2 = (x-3)^2 + x = x^2 - 5x + 9$. $\\frac{d(D^2)}{dx} = 2x - 5 = 0 \\Rightarrow x = \\frac{5}{2}$. $y = \\sqrt{\\frac{5}{2}}$. Closest point: $\\left(\\frac{5}{2}, \\sqrt{\\frac{5}{2}}\\right)$.',
    marks: 4,
  },
  // Level 3
  {
    id: 'optimisation-l3-q1',
    nodeId: 'optimisation',
    level: 3,
    title: 'Closed box optimisation',
    text: 'A closed rectangular box has a square base of side $x$ cm and volume $500$ cm³. Find the dimensions that minimise the total surface area.',
    hints: ['$h = \\frac{500}{x^2}$', '$S = 2x^2 + 4xh = 2x^2 + \\frac{2000}{x}$'],
    answer: '$\\frac{dS}{dx} = 4x - \\frac{2000}{x^2} = 0 \\Rightarrow x^3 = 500 \\Rightarrow x = \\sqrt[3]{500} \\approx 7.94$ cm. $h = \\frac{500}{x^2} = \\sqrt[3]{500} \\approx 7.94$ cm (a cube).',
    marks: 5,
  },
  {
    id: 'optimisation-l3-q2',
    nodeId: 'optimisation',
    level: 3,
    title: 'Maximum volume of a cylinder',
    text: 'A cylinder is inscribed in a sphere of radius $R$. Show that the maximum volume of the cylinder is $\\frac{4\\pi R^3}{3\\sqrt{3}}$.',
    hints: ['Let half-height $= h$, radius $= r$. Then $r^2 + h^2 = R^2$', '$V = \\pi r^2 (2h) = 2\\pi h(R^2 - h^2)$'],
    answer: '$V = 2\\pi(R^2 h - h^3)$. $\\frac{dV}{dh} = 2\\pi(R^2 - 3h^2) = 0 \\Rightarrow h = \\frac{R}{\\sqrt{3}}$. $V = 2\\pi \\cdot \\frac{R}{\\sqrt{3}}\\left(R^2 - \\frac{R^2}{3}\\right) = 2\\pi \\cdot \\frac{R}{\\sqrt{3}} \\cdot \\frac{2R^2}{3} = \\frac{4\\pi R^3}{3\\sqrt{3}}$.',
    marks: 5,
  },
  {
    id: 'optimisation-l3-q3',
    nodeId: 'optimisation',
    level: 3,
    title: 'Revenue maximisation',
    text: 'A company sells $q$ items at price $p = 100 - 2q$ dollars each. The cost is $C = 200 + 10q$. Find the production level that maximises profit.',
    hints: ['Revenue $R = pq = q(100 - 2q)$', 'Profit $= R - C$'],
    answer: '$\\Pi = q(100 - 2q) - (200 + 10q) = -2q^2 + 90q - 200$. $\\frac{d\\Pi}{dq} = -4q + 90 = 0 \\Rightarrow q = 22.5$. Since $q$ must be integer, $q = 22$ or $q = 23$. $\\Pi(22) = 790$, $\\Pi(23) = 790$. Max profit $= \\$790$.',
    marks: 4,
  },
  // Level 4
  {
    id: 'optimisation-l4-q1',
    nodeId: 'optimisation',
    level: 4,
    title: 'Cone from a sector',
    text: 'A cone is formed by rolling a sector of radius $R$ and angle $\\theta$. Find $\\theta$ that maximises the volume of the cone.',
    hints: ['Base radius $r = \\frac{R\\theta}{2\\pi}$, slant height $= R$', '$h = \\sqrt{R^2 - r^2}$', 'Maximise $V = \\frac{1}{3}\\pi r^2 h$'],
    answer: 'Let $r = \\frac{R\\theta}{2\\pi}$. $h = \\sqrt{R^2 - r^2}$. $V = \\frac{\\pi}{3}r^2\\sqrt{R^2 - r^2}$. Maximise $V^2 = \\frac{\\pi^2}{9}r^4(R^2 - r^2)$. Let $u = r^2$: maximise $u^2(R^2 - u)$. $\\frac{d}{du}[u^2 R^2 - u^3] = 2uR^2 - 3u^2 = 0 \\Rightarrow u = \\frac{2R^2}{3}$, so $r^2 = \\frac{2R^2}{3}$, $r = R\\sqrt{\\frac{2}{3}}$. Then $\\theta = \\frac{2\\pi r}{R} = 2\\pi\\sqrt{\\frac{2}{3}}$.',
    marks: 6,
  },
  {
    id: 'optimisation-l4-q2',
    nodeId: 'optimisation',
    level: 4,
    title: 'Shortest path',
    text: 'A lifeguard at point $A$ on the beach needs to reach a swimmer at point $B$ in the water. $A$ is $50$ m along the beach from the nearest point $C$ to $B$, and $B$ is $30$ m from the beach. The lifeguard runs at $5$ m/s on sand and swims at $2$ m/s. Find the point where they should enter the water to minimise travel time.',
    hints: ['Let entry point be $x$ m from $C$', '$T = \\frac{50 - x}{5} + \\frac{\\sqrt{x^2 + 900}}{2}$'],
    answer: '$\\frac{dT}{dx} = -\\frac{1}{5} + \\frac{x}{2\\sqrt{x^2 + 900}} = 0$. $\\frac{x}{2\\sqrt{x^2 + 900}} = \\frac{1}{5}$. $5x = 2\\sqrt{x^2 + 900}$. $25x^2 = 4x^2 + 3600$. $21x^2 = 3600$. $x = \\frac{60}{\\sqrt{21}} \\approx 13.09$ m from $C$.',
    marks: 5,
  },
  {
    id: 'optimisation-l4-q3',
    nodeId: 'optimisation',
    level: 4,
    title: 'Trough optimisation',
    text: 'A trough with a trapezoidal cross-section has a bottom of width $30$ cm and sides of length $20$ cm that make angle $\\theta$ with the vertical. Find $\\theta$ to maximise the cross-sectional area.',
    hints: ['Extra width on each side $= 20\\sin\\theta$, height $= 20\\cos\\theta$', '$A = (30 + 20\\sin\\theta) \\times 20\\cos\\theta$'],
    answer: '$A = 20\\cos\\theta(30 + 20\\sin\\theta) = 600\\cos\\theta + 400\\sin\\theta\\cos\\theta = 600\\cos\\theta + 200\\sin 2\\theta$. $\\frac{dA}{d\\theta} = -600\\sin\\theta + 400\\cos 2\\theta = 0$. Using $\\cos 2\\theta = 1 - 2\\sin^2\\theta$: $-600\\sin\\theta + 400 - 800\\sin^2\\theta = 0$. $800\\sin^2\\theta + 600\\sin\\theta - 400 = 0$. $4\\sin^2\\theta + 3\\sin\\theta - 2 = 0$. $\\sin\\theta = \\frac{-3 + \\sqrt{41}}{8} \\approx 0.4253$. $\\theta \\approx 25.2°$.',
    marks: 5,
  },
  // Level 5
  {
    id: 'optimisation-l5-q1',
    nodeId: 'optimisation',
    level: 5,
    title: 'Can design',
    text: 'A cylindrical can must hold $V$ mL. The material for the top and bottom costs twice as much per cm² as the curved surface. Find the ratio of height to radius that minimises the total cost.',
    hints: ['Cost $\\propto 2 \\times 2\\pi r^2 + 1 \\times 2\\pi r h$', 'Use $\\pi r^2 h = V$ to eliminate $h$'],
    answer: 'Cost $= 4\\pi r^2 + 2\\pi r h$. With $h = \\frac{V}{\\pi r^2}$: $C = 4\\pi r^2 + \\frac{2V}{r}$. $\\frac{dC}{dr} = 8\\pi r - \\frac{2V}{r^2} = 0 \\Rightarrow r^3 = \\frac{V}{4\\pi}$. $h = \\frac{V}{\\pi r^2} = \\frac{4\\pi r^3}{\\pi r^2} = 4r$. Ratio $\\frac{h}{r} = 4$.',
    marks: 6,
  },
  {
    id: 'optimisation-l5-q2',
    nodeId: 'optimisation',
    level: 5,
    title: 'Maximum area triangle',
    text: 'A triangle is formed with one vertex at the origin, one on the positive $x$-axis, and one on the curve $y = e^{-x}$ for $x > 0$. Find the maximum area of this triangle.',
    hints: ['Vertex on curve: $(a, e^{-a})$, vertex on $x$-axis: $(b, 0)$', 'Area $= \\frac{1}{2} b \\cdot e^{-a}$; but think about which configuration gives a triangle'],
    answer: 'Vertices: $(0,0)$, $(b, 0)$, $(a, e^{-a})$. Area $= \\frac{1}{2}|b \\cdot e^{-a}|$. To maximise, take $b$ as large as possible — but the problem implies the $x$-axis vertex relates to the curve point. Taking the simpler reading: vertex at origin, vertex at $(a, 0)$, vertex at $(a, e^{-a})$. Area $= \\frac{1}{2}a \\cdot e^{-a}$. $\\frac{dA}{da} = \\frac{1}{2}(e^{-a} - ae^{-a}) = \\frac{1}{2}e^{-a}(1 - a) = 0 \\Rightarrow a = 1$. Max area $= \\frac{1}{2e}$.',
    marks: 6,
  },
];

export default questions;
