import type { TrainingQuestion } from './types';

const questions: TrainingQuestion[] = [
  // Level 1
  {
    id: 'cond-prob-l1-1',
    nodeId: 'cond-prob',
    level: 1,
    title: 'Basic Conditional Probability',
    text: 'A bag contains 3 red and 5 blue marbles. You draw one marble and it is red. What is the probability that a second marble drawn (without replacement) is also red?',
    hints: ['After removing one red marble, how many red and total marbles remain?'],
    answer: '$\\frac{2}{7}$',
    marks: 2,
  },
  {
    id: 'cond-prob-l1-2',
    nodeId: 'cond-prob',
    level: 1,
    title: 'Conditional Probability from a Table',
    text: 'In a class of 30 students, 18 study Maths and 12 study English. Of the Maths students, 6 also study English. If a student is chosen at random and studies Maths, what is the probability they also study English?',
    hints: ['Use the definition $\\Pr(E|M) = \\frac{\\Pr(E \\cap M)}{\\Pr(M)}$'],
    answer: '$\\frac{6}{18} = \\frac{1}{3}$',
    marks: 2,
  },
  {
    id: 'cond-prob-l1-3',
    nodeId: 'cond-prob',
    level: 1,
    title: 'Simple Conditional Probability',
    text: 'A fair six-sided die is rolled. Given that the result is even, what is the probability that it is greater than 3?',
    hints: ['The even outcomes are 2, 4, 6. Which of these are greater than 3?'],
    answer: '$\\frac{2}{3}$',
    marks: 2,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\frac{1}{3}$', correct: false },
      { label: 'B', text: '$\\frac{2}{3}$', correct: true },
      { label: 'C', text: '$\\frac{1}{2}$', correct: false },
      { label: 'D', text: '$\\frac{1}{6}$', correct: false },
    ],
  },
  {
    id: 'cond-prob-l1-4',
    nodeId: 'cond-prob',
    level: 1,
    title: 'Independence Check',
    text: 'Events $A$ and $B$ are such that $\\Pr(A) = 0.4$, $\\Pr(B) = 0.5$ and $\\Pr(A \\cap B) = 0.2$. Are $A$ and $B$ independent?',
    hints: ['Check whether $\\Pr(A \\cap B) = \\Pr(A) \\times \\Pr(B)$'],
    answer: 'Yes, because $\\Pr(A) \\times \\Pr(B) = 0.4 \\times 0.5 = 0.2 = \\Pr(A \\cap B)$.',
    marks: 2,
  },
  // Level 2
  {
    id: 'cond-prob-l2-1',
    nodeId: 'cond-prob',
    level: 2,
    title: 'Tree Diagram Conditional Probability',
    text: 'A medical test is 90% accurate for detecting a disease (true positive rate) and has a 5% false positive rate. If 2% of the population has the disease, what is the probability that a person who tests positive actually has the disease?',
    hints: [
      'Use Bayes\' theorem: $\\Pr(D|+) = \\frac{\\Pr(+|D)\\Pr(D)}{\\Pr(+)}$',
      '$\\Pr(+) = \\Pr(+|D)\\Pr(D) + \\Pr(+|D\')\\Pr(D\')$',
    ],
    answer: '$\\Pr(D|+) = \\frac{0.90 \\times 0.02}{0.90 \\times 0.02 + 0.05 \\times 0.98} = \\frac{0.018}{0.067} \\approx 0.269$',
    marks: 3,
  },
  {
    id: 'cond-prob-l2-2',
    nodeId: 'cond-prob',
    level: 2,
    title: 'Two-Way Table',
    text: 'A survey of 200 people found: 80 like coffee, 60 like tea, 30 like both. Find $\\Pr(\\text{coffee} | \\text{tea})$.',
    hints: ['$\\Pr(C|T) = \\frac{\\Pr(C \\cap T)}{\\Pr(T)}$'],
    answer: '$\\Pr(C|T) = \\frac{30}{60} = \\frac{1}{2}$',
    marks: 3,
  },
  {
    id: 'cond-prob-l2-3',
    nodeId: 'cond-prob',
    level: 2,
    title: 'Sequential Events',
    text: 'Two cards are drawn without replacement from a standard 52-card deck. What is the probability that both are aces?',
    hints: ['$\\Pr(\\text{both aces}) = \\Pr(\\text{1st ace}) \\times \\Pr(\\text{2nd ace}|\\text{1st ace})$'],
    answer: '$\\frac{4}{52} \\times \\frac{3}{51} = \\frac{12}{2652} = \\frac{1}{221}$',
    marks: 3,
  },
  {
    id: 'cond-prob-l2-4',
    nodeId: 'cond-prob',
    level: 2,
    title: 'Conditional Probability Formula',
    text: 'If $\\Pr(A) = 0.6$, $\\Pr(B) = 0.3$ and $\\Pr(A|B) = 0.5$, find $\\Pr(A \\cup B)$.',
    hints: [
      'First find $\\Pr(A \\cap B) = \\Pr(A|B) \\times \\Pr(B)$',
      'Then use the addition rule',
    ],
    answer: '$\\Pr(A \\cap B) = 0.5 \\times 0.3 = 0.15$. $\\Pr(A \\cup B) = 0.6 + 0.3 - 0.15 = 0.75$',
    marks: 3,
  },
  // Level 3
  {
    id: 'cond-prob-l3-1',
    nodeId: 'cond-prob',
    level: 3,
    title: 'Bayes\' Theorem with Three Events',
    text: 'A factory has three machines A, B and C producing 50%, 30% and 20% of items respectively. Defect rates are 3%, 4% and 5%. An item is selected at random and found to be defective. What is the probability it came from machine B?',
    hints: [
      'Use Bayes\' theorem with total probability in the denominator',
      '$\\Pr(\\text{defective}) = 0.5(0.03) + 0.3(0.04) + 0.2(0.05)$',
    ],
    answer: '$\\Pr(B|D) = \\frac{0.3 \\times 0.04}{0.5 \\times 0.03 + 0.3 \\times 0.04 + 0.2 \\times 0.05} = \\frac{0.012}{0.037} \\approx 0.324$',
    marks: 4,
  },
  {
    id: 'cond-prob-l3-2',
    nodeId: 'cond-prob',
    level: 3,
    title: 'Repeated Trials with Conditional Information',
    text: 'A box contains 4 red and 6 blue balls. Three balls are drawn without replacement. Given that the first ball drawn is red, find the probability that exactly two of the three balls are red.',
    hints: [
      'After the first red ball, you need exactly 1 more red from the remaining 3 red and 6 blue balls',
      'Consider cases: RRB and RBR for the 2nd and 3rd draws',
    ],
    answer: '$\\Pr = \\frac{3}{9} \\times \\frac{6}{8} + \\frac{6}{9} \\times \\frac{3}{8} = \\frac{18}{72} + \\frac{18}{72} = \\frac{36}{72} = \\frac{1}{2}$',
    marks: 4,
  },
  {
    id: 'cond-prob-l3-3',
    nodeId: 'cond-prob',
    level: 3,
    title: 'Conditional Probability with Combinatorics',
    text: 'A committee of 3 is chosen at random from 5 men and 4 women. Given that the committee contains at least one woman, what is the probability it contains exactly 2 women?',
    hints: [
      '$\\Pr(\\text{exactly 2 women} | \\text{at least 1 woman}) = \\frac{\\Pr(\\text{exactly 2 women})}{\\Pr(\\text{at least 1 woman})}$',
      '$\\Pr(\\text{at least 1 woman}) = 1 - \\Pr(\\text{no women})$',
    ],
    answer: '$\\Pr(\\text{no women}) = \\frac{\\binom{5}{3}}{\\binom{9}{3}} = \\frac{10}{84}$. $\\Pr(\\text{exactly 2 women}) = \\frac{\\binom{4}{2}\\binom{5}{1}}{\\binom{9}{3}} = \\frac{30}{84}$. Answer: $\\frac{30/84}{74/84} = \\frac{30}{74} = \\frac{15}{37}$',
    marks: 4,
  },
  // Level 4
  {
    id: 'cond-prob-l4-1',
    nodeId: 'cond-prob',
    level: 4,
    title: 'Extended Bayes\' Theorem',
    text: 'An insurance company classifies drivers as low-risk (60%), medium-risk (30%) and high-risk (10%). The probabilities of making a claim in a year are 0.05, 0.15 and 0.30 respectively. A driver makes a claim. After the claim, the company reclassifies using updated probabilities. What is the probability the driver is high-risk given they made a claim? If they make a second independent claim the following year, what is the updated probability they are high-risk?',
    hints: [
      'Apply Bayes\' theorem once for the first claim',
      'Use the posterior from the first claim as the prior for the second',
    ],
    answer: 'First claim: $\\Pr(H|C_1) = \\frac{0.10 \\times 0.30}{0.60 \\times 0.05 + 0.30 \\times 0.15 + 0.10 \\times 0.30} = \\frac{0.030}{0.105} = \\frac{2}{7} \\approx 0.286$. After second claim with updated priors: $\\Pr(H|C_2) = \\frac{\\frac{2}{7} \\times 0.30}{\\frac{4}{7} \\times 0.05 + \\frac{3}{7} \\times 0.15 + \\frac{2}{7} \\times 0.30} = \\frac{0.60/7}{(0.20+0.45+0.60)/7} = \\frac{0.60}{1.25} = 0.48$',
    marks: 5,
  },
  {
    id: 'cond-prob-l4-2',
    nodeId: 'cond-prob',
    level: 4,
    title: 'Conditional Expectation',
    text: 'A fair coin is tossed repeatedly. Let $X$ be the number of tosses needed to get two consecutive heads. Find $\\Pr(X = 4)$.',
    hints: [
      'List all sequences of length 4 ending in HH where no earlier consecutive HH appears',
      'Valid sequences: TTHH, HTHH',
    ],
    answer: 'Sequences of length 4 ending in HH with no earlier HH: TTHH, HTHH. $\\Pr(X=4) = 2 \\times \\left(\\frac{1}{2}\\right)^4 = \\frac{2}{16} = \\frac{1}{8}$',
    marks: 5,
  },
  {
    id: 'cond-prob-l4-3',
    nodeId: 'cond-prob',
    level: 4,
    title: 'Monty Hall Variant',
    text: 'In a game show, there are 4 doors. Behind one door is a prize. You choose door 1. The host, who knows where the prize is, opens door 3 (which has no prize). You may switch to door 2 or door 4. What is the probability of winning if you switch to one of the remaining doors (chosen at random)?',
    hints: [
      'Consider the prior probability your chosen door is correct: $\\frac{1}{4}$',
      'The probability the prize is behind one of the other doors is $\\frac{3}{4}$, now split between 2 doors',
    ],
    answer: 'If you switch, the probability of winning is $\\frac{3}{4} \\times \\frac{1}{2} = \\frac{3}{8}$. (Staying gives $\\frac{1}{4}$, switching is better.)',
    marks: 5,
  },
  // Level 5
  {
    id: 'cond-prob-l5-1',
    nodeId: 'cond-prob',
    level: 5,
    title: 'Bayesian Updating with Continuous Prior',
    text: 'A coin has an unknown probability $p$ of heads. Your prior belief is that $p$ is uniformly distributed on $[0,1]$. You flip the coin 5 times and get 3 heads. Find the posterior probability that $p > 0.5$.',
    hints: [
      'The posterior density is $f(p|\\text{data}) \\propto p^3(1-p)^2$ (a Beta(4,3) distribution)',
      'You need $\\Pr(p > 0.5) = \\int_{0.5}^{1} \\frac{p^3(1-p)^2}{B(4,3)} \\, dp$',
    ],
    answer: '$B(4,3) = \\frac{3! \\cdot 2!}{6!} = \\frac{1}{60}$. $\\int_{0.5}^{1} 60p^3(1-p)^2 \\, dp = 60\\int_{0.5}^{1}(p^3 - 2p^4 + p^5)dp = 60\\left[\\frac{p^4}{4} - \\frac{2p^5}{5} + \\frac{p^6}{6}\\right]_{0.5}^{1} = 60\\left(\\frac{1}{60} - \\frac{1}{4}\\cdot\\frac{1}{16} + \\frac{2}{5}\\cdot\\frac{1}{32} - \\frac{1}{6}\\cdot\\frac{1}{64}\\right) = \\frac{656}{1024} \\approx 0.6563$',
    marks: 6,
  },
  {
    id: 'cond-prob-l5-2',
    nodeId: 'cond-prob',
    level: 5,
    title: 'Simpson\'s Paradox',
    text: 'Hospital A treats 100 easy cases (95 survive) and 100 hard cases (30 survive). Hospital B treats 200 easy cases (180 survive) and 10 hard cases (2 survive). Show that Hospital B has a higher overall survival rate, but Hospital A has a higher survival rate for both easy and hard cases separately. Explain this paradox using conditional probability.',
    hints: [
      'Compute survival rates per category and overall for each hospital',
      'This is Simpson\'s paradox â€” the lurking variable is case difficulty',
    ],
    answer: 'Hospital A: Easy $\\frac{95}{100}=95\\%$, Hard $\\frac{30}{100}=30\\%$, Overall $\\frac{125}{200}=62.5\\%$. Hospital B: Easy $\\frac{180}{200}=90\\%$, Hard $\\frac{2}{10}=20\\%$, Overall $\\frac{182}{210}\\approx 86.7\\%$. A is better in each category but worse overall because A takes proportionally more hard cases. This is Simpson\'s paradox: the conditional probabilities $\\Pr(\\text{survive}|\\text{easy})$ and $\\Pr(\\text{survive}|\\text{hard})$ both favour A, but the marginal $\\Pr(\\text{survive})$ favours B due to confounding.',
    marks: 6,
  },
];

export default questions;
