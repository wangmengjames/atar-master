import type { TrainingQuestion } from './types';

const questions: TrainingQuestion[] = [
  // ===== LEVEL 1 (Year 8 basics) =====
  {
    id: 'sample-prop-L1-01',
    nodeId: 'sample-prop',
    level: 1,
    title: 'What is a sample proportion?',
    text: 'In a class of 30 students, 12 wear glasses. What is the sample proportion $\\hat{p}$?',
    hints: ['$\\hat{p} = \\frac{\\text{count with feature}}{\\text{total}}$.'],
    answer: '$\\hat{p} = \\frac{12}{30} = 0.4$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.4$', correct: true },
      { label: 'B', text: '$12$', correct: false },
      { label: 'C', text: '$0.12$', correct: false },
      { label: 'D', text: '$\\frac{30}{12} = 2.5$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-02',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Population vs sample',
    text: 'A country has 25 million people. A pollster surveys 1000 people. Which is the sample?',
    hints: ['The sample is the smaller group actually measured.'],
    answer: 'The 1000 people surveyed are the sample. The 25 million is the population.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'The 1000 people surveyed', correct: true },
      { label: 'B', text: 'The 25 million people', correct: false },
      { label: 'C', text: 'Both', correct: false },
      { label: 'D', text: 'Neither', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-03',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Variability between samples',
    text: 'If you take two different random samples of 50 students, will you always get the same $\\hat{p}$?',
    hints: ['Random samples vary.'],
    answer: 'No. Different random samples will generally give different values of $\\hat{p}$ due to sampling variability.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'No, $\\hat{p}$ varies between samples', correct: true },
      { label: 'B', text: 'Yes, $\\hat{p}$ is always the same', correct: false },
      { label: 'C', text: 'Only if the population is large', correct: false },
      { label: 'D', text: 'Yes, if the samples are random', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-04',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Converting proportion to percentage',
    text: 'If $\\hat{p} = 0.35$, what percentage of the sample has the characteristic?',
    hints: ['Multiply by 100.'],
    answer: '$0.35 \\times 100 = 35\\%$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$35\\%$', correct: true },
      { label: 'B', text: '$3.5\\%$', correct: false },
      { label: 'C', text: '$0.35\\%$', correct: false },
      { label: 'D', text: '$65\\%$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-05',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Counting from proportion',
    text: 'In a sample of $n = 200$, $\\hat{p} = 0.15$. How many in the sample have the characteristic?',
    hints: ['Count $= n \\times \\hat{p}$.'],
    answer: 'Count $= 200 \\times 0.15 = 30$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$30$', correct: true },
      { label: 'B', text: '$15$', correct: false },
      { label: 'C', text: '$170$', correct: false },
      { label: 'D', text: '$0.15$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-06',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Random sampling',
    text: 'Why is it important to use a random sample when estimating a population proportion?',
    hints: ['Non-random samples may be biased.'],
    answer: 'Random sampling avoids bias and ensures $\\hat{p}$ is a fair estimate of the population proportion $p$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'To avoid bias and ensure a fair estimate', correct: true },
      { label: 'B', text: 'To make the sample larger', correct: false },
      { label: 'C', text: 'To guarantee $\\hat{p} = p$', correct: false },
      { label: 'D', text: 'Random sampling is not important', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-07',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Estimate quality',
    text: 'Which sample size gives a more reliable estimate of the population proportion?',
    hints: ['Larger samples are more reliable.'],
    answer: 'A larger sample ($n = 500$) gives a more reliable estimate than a smaller one ($n = 50$).',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$n = 500$', correct: true },
      { label: 'B', text: '$n = 50$', correct: false },
      { label: 'C', text: '$n = 5$', correct: false },
      { label: 'D', text: 'All are equally reliable', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-08',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Unbiased estimator',
    text: 'On average, what value does $\\hat{p}$ equal?',
    hints: ['$\\hat{p}$ is an unbiased estimator.'],
    answer: 'On average, $E(\\hat{p}) = p$ (the true population proportion). $\\hat{p}$ is unbiased.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'The true population proportion $p$', correct: true },
      { label: 'B', text: '$0.5$', correct: false },
      { label: 'C', text: '$1$', correct: false },
      { label: 'D', text: 'It depends on the sample', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-09',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Sample proportion range',
    text: 'What values can $\\hat{p}$ take?',
    hints: ['$\\hat{p}$ is a proportion.'],
    answer: '$\\hat{p}$ can take values from $0$ to $1$ (inclusive), since it is $\\frac{X}{n}$ where $0 \\leq X \\leq n$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'From $0$ to $1$', correct: true },
      { label: 'B', text: 'From $-1$ to $1$', correct: false },
      { label: 'C', text: 'From $0$ to $\\infty$', correct: false },
      { label: 'D', text: 'Any real number', correct: false },
    ],
  },
  {
    id: 'sample-prop-L1-10',
    nodeId: 'sample-prop',
    level: 1,
    title: 'Proportion complement',
    text: 'If $\\hat{p} = 0.6$, what proportion does NOT have the characteristic?',
    hints: ['$1 - \\hat{p}$.'],
    answer: '$1 - 0.6 = 0.4$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.4$', correct: true },
      { label: 'B', text: '$0.6$', correct: false },
      { label: 'C', text: '$0.36$', correct: false },
      { label: 'D', text: '$-0.6$', correct: false },
    ],
  },

  // ===== LEVEL 2 (Year 9) =====
  {
    id: 'sample-prop-L2-01',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Mean of p-hat',
    text: 'If $p = 0.3$ and $n = 100$, what is $E(\\hat{p})$?',
    hints: ['$E(\\hat{p}) = p$.'],
    answer: '$E(\\hat{p}) = p = 0.3$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.3$', correct: true },
      { label: 'B', text: '$30$', correct: false },
      { label: 'C', text: '$0.03$', correct: false },
      { label: 'D', text: '$0.7$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-02',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Standard error formula',
    text: 'Write the formula for the standard error of $\\hat{p}$.',
    hints: ['SE involves $p$, $1-p$, and $n$.'],
    answer: '$\\text{SE}(\\hat{p}) = \\sqrt{\\frac{p(1-p)}{n}}$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\sqrt{\\frac{p(1-p)}{n}}$', correct: true },
      { label: 'B', text: '$\\frac{p(1-p)}{n}$', correct: false },
      { label: 'C', text: '$\\sqrt{\\frac{p}{n}}$', correct: false },
      { label: 'D', text: '$\\sqrt{np(1-p)}$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-03',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Calculating SE',
    text: '$p = 0.4$, $n = 100$. Find the standard error of $\\hat{p}$.',
    hints: ['$\\text{SE} = \\sqrt{\\frac{0.4 \\times 0.6}{100}}$.'],
    answer: '$\\text{SE} = \\sqrt{\\frac{0.24}{100}} = \\sqrt{0.0024} \\approx 0.049$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.049$', correct: true },
      { label: 'B', text: '$0.24$', correct: false },
      { label: 'C', text: '$0.0024$', correct: false },
      { label: 'D', text: '$4.9$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-04',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Effect of n on SE',
    text: 'If $n$ is quadrupled (from 100 to 400) with $p = 0.5$, what happens to SE?',
    hints: ['$\\text{SE} \\propto \\frac{1}{\\sqrt{n}}$.'],
    answer: 'SE is halved. $\\text{SE}_{100} = \\frac{0.5}{10} = 0.05$, $\\text{SE}_{400} = \\frac{0.5}{20} = 0.025$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'SE is halved', correct: true },
      { label: 'B', text: 'SE is quartered', correct: false },
      { label: 'C', text: 'SE stays the same', correct: false },
      { label: 'D', text: 'SE doubles', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-05',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Sampling distribution shape',
    text: 'For large $n$, the sampling distribution of $\\hat{p}$ is approximately what shape?',
    hints: ['Central Limit Theorem.'],
    answer: 'By the Central Limit Theorem, $\\hat{p}$ is approximately normally distributed for large $n$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Normal (bell-shaped)', correct: true },
      { label: 'B', text: 'Uniform', correct: false },
      { label: 'C', text: 'Binomial', correct: false },
      { label: 'D', text: 'Skewed right', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-06',
    nodeId: 'sample-prop',
    level: 2,
    title: 'p-hat as X/n',
    text: 'If $X \\sim \\text{Bi}(n, p)$, what is the distribution of $\\hat{p} = \\frac{X}{n}$?',
    hints: ['$E(\\hat{p}) = p$, $\\text{Var}(\\hat{p}) = \\frac{p(1-p)}{n}$.'],
    answer: '$\\hat{p}$ has mean $p$ and variance $\\frac{p(1-p)}{n}$. For large $n$, $\\hat{p} \\approx N\\left(p, \\frac{p(1-p)}{n}\\right)$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Approximately $N\\left(p, \\frac{p(1-p)}{n}\\right)$ for large $n$', correct: true },
      { label: 'B', text: '$\\text{Bi}(n, p)$', correct: false },
      { label: 'C', text: '$N(0, 1)$', correct: false },
      { label: 'D', text: 'Uniform on $[0, 1]$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-07',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Multiple samples',
    text: '$p = 0.5$, $n = 64$. If you take many samples, about $95\\%$ of $\\hat{p}$ values will lie within what range?',
    hints: ['$\\hat{p} \\pm 2\\text{SE}$. SE $= \\sqrt{\\frac{0.25}{64}} = \\frac{0.5}{8} = 0.0625$.'],
    answer: '$\\text{SE} = 0.0625$. $95\\%$ range: $0.5 \\pm 2(0.0625) = (0.375, 0.625)$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$(0.375, 0.625)$', correct: true },
      { label: 'B', text: '$(0.4375, 0.5625)$', correct: false },
      { label: 'C', text: '$(0.25, 0.75)$', correct: false },
      { label: 'D', text: '$(0.3125, 0.6875)$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-08',
    nodeId: 'sample-prop',
    level: 2,
    title: 'SE vs SD',
    text: 'What is the difference between the standard deviation of $X$ and the standard error of $\\hat{p}$ when $X \\sim \\text{Bi}(n, p)$?',
    hints: ['$\\text{SD}(X) = \\sqrt{np(1-p)}$, $\\text{SE}(\\hat{p}) = \\sqrt{\\frac{p(1-p)}{n}}$.'],
    answer: '$\\text{SD}(X) = \\sqrt{np(1-p)}$ measures variability of counts. $\\text{SE}(\\hat{p}) = \\frac{\\text{SD}(X)}{n} = \\sqrt{\\frac{p(1-p)}{n}}$ measures variability of the proportion.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\text{SE}(\\hat{p}) = \\frac{\\text{SD}(X)}{n}$; SE measures proportion variability', correct: true },
      { label: 'B', text: 'They are the same thing', correct: false },
      { label: 'C', text: '$\\text{SE} = \\text{SD}^2$', correct: false },
      { label: 'D', text: '$\\text{SE} = n \\times \\text{SD}$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-09',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Simulating sampling',
    text: 'A coin has $p = 0.5$. You flip it 100 times and get 55 heads. Is $\\hat{p} = 0.55$ unusual?',
    hints: ['SE $= \\sqrt{\\frac{0.25}{100}} = 0.05$. $z = \\frac{0.55-0.5}{0.05} = 1$.'],
    answer: '$z = 1$. $\\Pr(|Z| > 1) \\approx 0.32$. Not unusual â€” well within normal variation.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'No, $z = 1$ is within normal variation', correct: true },
      { label: 'B', text: 'Yes, $0.55 \\neq 0.5$', correct: false },
      { label: 'C', text: 'Yes, $z = 1$ is significant', correct: false },
      { label: 'D', text: 'Cannot determine', correct: false },
    ],
  },
  {
    id: 'sample-prop-L2-10',
    nodeId: 'sample-prop',
    level: 2,
    title: 'Which p maximises SE?',
    text: 'For fixed $n$, at what value of $p$ is $\\text{SE}(\\hat{p})$ maximised?',
    hints: ['$p(1-p)$ is maximised at $p = 0.5$.'],
    answer: '$\\text{SE} = \\sqrt{\\frac{p(1-p)}{n}}$. Since $p(1-p)$ is maximised at $p = 0.5$, SE is maximised there.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$p = 0.5$', correct: true },
      { label: 'B', text: '$p = 0$', correct: false },
      { label: 'C', text: '$p = 1$', correct: false },
      { label: 'D', text: '$p = 0.25$', correct: false },
    ],
  },

  // ===== LEVEL 3 (Year 10) =====
  {
    id: 'sample-prop-L3-01',
    nodeId: 'sample-prop',
    level: 3,
    title: 'CLT for proportions',
    text: '$p = 0.6$, $n = 225$. Find $\\Pr(\\hat{p} > 0.64)$. Given $\\Pr(Z < 1.23) \\approx 0.891$.',
    hints: ['SE $= \\sqrt{\\frac{0.24}{225}} = \\frac{\\sqrt{0.24}}{15}$.'],
    answer: 'SE $= \\sqrt{\\frac{0.24}{225}} = \\frac{0.4899}{15} \\approx 0.03266$. $z = \\frac{0.64-0.6}{0.03266} \\approx 1.23$. $\\Pr(\\hat{p} > 0.64) = 1 - 0.891 = 0.109$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.109$', correct: true },
      { label: 'B', text: '$0.891$', correct: false },
      { label: 'C', text: '$0.040$', correct: false },
      { label: 'D', text: '$0.500$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-02',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Range for p-hat',
    text: '$p = 0.5$, $n = 400$. Find the interval that contains the middle $95\\%$ of $\\hat{p}$ values.',
    hints: ['$p \\pm 1.96 \\times \\text{SE}$.'],
    answer: 'SE $= \\sqrt{\\frac{0.25}{400}} = 0.025$. Interval: $0.5 \\pm 1.96(0.025) = 0.5 \\pm 0.049 = (0.451, 0.549)$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$(0.451, 0.549)$', correct: true },
      { label: 'B', text: '$(0.475, 0.525)$', correct: false },
      { label: 'C', text: '$(0.400, 0.600)$', correct: false },
      { label: 'D', text: '$(0.450, 0.550)$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-03',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Checking CLT conditions',
    text: '$p = 0.05$, $n = 100$. Can we use the normal approximation for $\\hat{p}$?',
    hints: ['Need $np \\geq 10$ and $n(1-p) \\geq 10$.'],
    answer: '$np = 100 \\times 0.05 = 5 < 10$. The condition fails, so the normal approximation is not appropriate.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'No, $np = 5 < 10$', correct: true },
      { label: 'B', text: 'Yes, $n = 100$ is large enough', correct: false },
      { label: 'C', text: 'Yes, $n(1-p) = 95 > 10$', correct: false },
      { label: 'D', text: 'No, $p < 0.5$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-04',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Probability of p-hat in range',
    text: '$p = 0.7$, $n = 200$. Find $\\Pr(0.66 < \\hat{p} < 0.74)$. Given $\\Pr(Z < 1.23) = 0.891$.',
    hints: ['SE $= \\sqrt{\\frac{0.21}{200}} \\approx 0.0324$.'],
    answer: 'SE $\\approx 0.0324$. $z_1 = \\frac{0.66-0.7}{0.0324} \\approx -1.23$. $z_2 = \\frac{0.74-0.7}{0.0324} \\approx 1.23$. $\\Pr = 0.891 - 0.109 = 0.782$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.782$', correct: true },
      { label: 'B', text: '$0.891$', correct: false },
      { label: 'C', text: '$0.218$', correct: false },
      { label: 'D', text: '$0.680$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-05',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Required n for SE',
    text: 'How large must $n$ be so that $\\text{SE}(\\hat{p}) \\leq 0.02$ when $p = 0.5$?',
    hints: ['$\\sqrt{\\frac{0.25}{n}} \\leq 0.02$, so $n \\geq \\frac{0.25}{0.0004}$.'],
    answer: '$n \\geq \\frac{0.25}{0.0004} = 625$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$625$', correct: true },
      { label: 'B', text: '$250$', correct: false },
      { label: 'C', text: '$2500$', correct: false },
      { label: 'D', text: '$100$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-06',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Unusual sample proportion',
    text: '$p = 0.25$, $n = 400$. Is $\\hat{p} = 0.30$ significantly different from $p$? Given $\\Pr(Z < 2.31) = 0.990$.',
    hints: ['SE $= \\sqrt{\\frac{0.1875}{400}}$. Find $z$.'],
    answer: 'SE $= \\sqrt{\\frac{0.1875}{400}} = \\sqrt{0.000469} \\approx 0.02165$. $z = \\frac{0.30-0.25}{0.02165} \\approx 2.31$. $p$-value $= 2(1-0.990) = 0.020 < 0.05$. Yes, significantly different.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Yes, $z \\approx 2.31$ gives $p$-value $\\approx 0.02$', correct: true },
      { label: 'B', text: 'No, $0.30$ is close to $0.25$', correct: false },
      { label: 'C', text: 'Yes, but only at $1\\%$ level', correct: false },
      { label: 'D', text: 'No, $n$ is too large', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-07',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Comparing two sample sizes',
    text: 'Sample A: $n = 100$, SE $= 0.05$. Sample B: $n = 900$, same $p$. Find SE for B.',
    hints: ['$\\text{SE}_B = \\text{SE}_A \\times \\sqrt{\\frac{100}{900}}$.'],
    answer: '$\\text{SE}_B = 0.05 \\times \\frac{\\sqrt{100}}{\\sqrt{900}} = 0.05 \\times \\frac{10}{30} = 0.0167$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.0167$', correct: true },
      { label: 'B', text: '$0.005$', correct: false },
      { label: 'C', text: '$0.15$', correct: false },
      { label: 'D', text: '$0.025$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-08',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Sampling distribution simulation',
    text: '$p = 0.4$, $n = 50$. Describe the approximate sampling distribution of $\\hat{p}$.',
    hints: ['Check: $np = 20 \\geq 10$, $n(1-p) = 30 \\geq 10$. CLT applies.'],
    answer: '$\\hat{p} \\sim N\\left(0.4, \\frac{0.24}{50}\\right) = N(0.4, 0.0048)$. SD $\\approx 0.0693$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Approximately $N(0.4, 0.0693^2)$', correct: true },
      { label: 'B', text: 'Approximately $N(0.5, 0.07^2)$', correct: false },
      { label: 'C', text: 'Binomial$(50, 0.4)$', correct: false },
      { label: 'D', text: 'Approximately $N(0.4, 0.24^2)$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-09',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Proportion below threshold',
    text: '$p = 0.8$, $n = 150$. Find $\\Pr(\\hat{p} < 0.75)$. Given $\\Pr(Z < -1.53) \\approx 0.063$.',
    hints: ['SE $= \\sqrt{\\frac{0.16}{150}} \\approx 0.0327$.'],
    answer: 'SE $\\approx 0.0327$. $z = \\frac{0.75-0.8}{0.0327} \\approx -1.53$. $\\Pr(\\hat{p} < 0.75) \\approx 0.063$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.063$', correct: true },
      { label: 'B', text: '$0.937$', correct: false },
      { label: 'C', text: '$0.126$', correct: false },
      { label: 'D', text: '$0.050$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L3-10',
    nodeId: 'sample-prop',
    level: 3,
    title: 'Bias in sampling',
    text: 'A survey only polls people at a shopping mall. The population proportion of shoppers who prefer Brand A is $p = 0.3$. Will this method give an unbiased estimate?',
    hints: ['Mall shoppers may not represent the whole population.'],
    answer: 'No. This is a convenience sample, likely biased. Mall shoppers may differ from the general population.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'No, convenience sampling is likely biased', correct: true },
      { label: 'B', text: 'Yes, as long as $n$ is large enough', correct: false },
      { label: 'C', text: 'Yes, any sample gives unbiased estimates', correct: false },
      { label: 'D', text: 'Only biased if $n < 30$', correct: false },
    ],
  },

  // ===== LEVEL 4 (VCE Methods standard) =====
  {
    id: 'sample-prop-L4-01',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Full CLT problem',
    text: '$p = 0.55$, $n = 500$. Find $\\Pr(\\hat{p} > 0.58)$. Given $\\Pr(Z < 1.35) = 0.911$.',
    hints: ['SE $= \\sqrt{\\frac{0.2475}{500}}$.'],
    answer: 'SE $= \\sqrt{\\frac{0.2475}{500}} = \\sqrt{0.000495} \\approx 0.02225$. $z = \\frac{0.58-0.55}{0.02225} \\approx 1.35$. $\\Pr(\\hat{p} > 0.58) = 1 - 0.911 = 0.089$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.089$', correct: true },
      { label: 'B', text: '$0.911$', correct: false },
      { label: 'C', text: '$0.045$', correct: false },
      { label: 'D', text: '$0.178$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-02',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Inverse problem for n',
    text: '$p = 0.3$. Find $n$ so that $\\Pr(|\\hat{p} - p| < 0.05) \\geq 0.95$.',
    hints: ['$\\frac{0.05}{\\text{SE}} \\geq 1.96$. SE $= \\sqrt{\\frac{0.21}{n}}$.'],
    answer: '$1.96 \\times \\sqrt{\\frac{0.21}{n}} \\leq 0.05$. $\\sqrt{\\frac{0.21}{n}} \\leq 0.02551$. $\\frac{0.21}{n} \\leq 0.000651$. $n \\geq 322.6$. So $n = 323$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$323$', correct: true },
      { label: 'B', text: '$322$', correct: false },
      { label: 'C', text: '$385$', correct: false },
      { label: 'D', text: '$200$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-03',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Testing a claim',
    text: 'A company claims $90\\%$ satisfaction. In $n = 200$, $\\hat{p} = 0.86$. Test at $5\\%$ significance. Given $\\Pr(Z < -1.89) = 0.029$.',
    hints: ['$z = \\frac{0.86 - 0.90}{\\text{SE}}$ with SE using $p_0 = 0.90$.'],
    answer: 'SE $= \\sqrt{\\frac{0.09}{200}} = 0.02121$. $z = \\frac{0.86-0.90}{0.02121} = -1.89$. One-tailed $p$-value $= 0.029 < 0.05$. Reject claim.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Reject; $z = -1.89$, $p$-value $= 0.029 < 0.05$', correct: true },
      { label: 'B', text: 'Do not reject; $0.86$ is close to $0.90$', correct: false },
      { label: 'C', text: 'Reject; $\\hat{p} < p$', correct: false },
      { label: 'D', text: 'Do not reject; $p$-value $= 0.058 > 0.05$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-04',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Combining p-hat and CI',
    text: '$n = 300$, $\\hat{p} = 0.65$. Find the estimated standard error and the 95% CI.',
    hints: ['Use $\\hat{p}$ in the SE formula since $p$ is unknown.'],
    answer: 'SE $= \\sqrt{\\frac{0.65 \\times 0.35}{300}} = \\sqrt{0.000758} \\approx 0.02754$. CI: $0.65 \\pm 1.96(0.02754) = (0.596, 0.704)$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$(0.596, 0.704)$', correct: true },
      { label: 'B', text: '$(0.622, 0.678)$', correct: false },
      { label: 'C', text: '$(0.550, 0.750)$', correct: false },
      { label: 'D', text: '$(0.605, 0.695)$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-05',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Sampling distribution of difference',
    text: '$\\hat{p}_1$ from population with $p_1 = 0.6$ ($n_1 = 100$) and $\\hat{p}_2$ from $p_2 = 0.5$ ($n_2 = 100$). Find $E(\\hat{p}_1 - \\hat{p}_2)$ and $\\text{SE}(\\hat{p}_1 - \\hat{p}_2)$.',
    hints: ['$E = p_1 - p_2$. $\\text{SE} = \\sqrt{\\frac{p_1 q_1}{n_1} + \\frac{p_2 q_2}{n_2}}$.'],
    answer: '$E = 0.6 - 0.5 = 0.1$. $\\text{SE} = \\sqrt{\\frac{0.24}{100} + \\frac{0.25}{100}} = \\sqrt{0.0049} = 0.07$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$E = 0.1$, $\\text{SE} = 0.07$', correct: true },
      { label: 'B', text: '$E = 0.1$, $\\text{SE} = 0.049$', correct: false },
      { label: 'C', text: '$E = 0.55$, $\\text{SE} = 0.07$', correct: false },
      { label: 'D', text: '$E = 0.1$, $\\text{SE} = 0.007$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-06',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Increasing precision',
    text: 'Currently SE $= 0.04$ with $n = 150$. What $n$ is needed to reduce SE to $0.02$?',
    hints: ['SE $\\propto \\frac{1}{\\sqrt{n}}$, so halving SE requires quadrupling $n$.'],
    answer: '$\\frac{\\text{SE}_1}{\\text{SE}_2} = \\frac{\\sqrt{n_2}}{\\sqrt{n_1}}$. $\\frac{0.04}{0.02} = \\sqrt{\\frac{n_2}{150}}$. $4 = \\frac{n_2}{150}$. $n_2 = 600$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$600$', correct: true },
      { label: 'B', text: '$300$', correct: false },
      { label: 'C', text: '$2400$', correct: false },
      { label: 'D', text: '$450$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-07',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Two-sided probability',
    text: '$p = 0.45$, $n = 250$. Find $\\Pr(|\\hat{p} - 0.45| > 0.05)$. Given $\\Pr(Z < 1.59) = 0.944$.',
    hints: ['$z = \\frac{0.05}{\\text{SE}}$. This is a two-tailed probability.'],
    answer: 'SE $= \\sqrt{\\frac{0.2475}{250}} \\approx 0.03146$. $z = \\frac{0.05}{0.03146} \\approx 1.59$. $\\Pr(|\\hat{p}-0.45|>0.05) = 2(1-0.944) = 0.112$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.112$', correct: true },
      { label: 'B', text: '$0.056$', correct: false },
      { label: 'C', text: '$0.944$', correct: false },
      { label: 'D', text: '$0.888$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-08',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Exam proportion question',
    text: 'A manufacturer claims the defect rate is $p = 0.02$. In a sample of 500, 18 are defective. Is this consistent with the claim at $5\\%$ significance?',
    hints: ['$\\hat{p} = 0.036$. SE $= \\sqrt{\\frac{0.0196}{500}}$.'],
    answer: '$\\hat{p} = 0.036$. SE $= \\sqrt{\\frac{0.0196}{500}} = 0.00626$. $z = \\frac{0.036-0.02}{0.00626} = 2.56$. $p$-value $\\approx 2 \\times 0.005 = 0.01 < 0.05$. Reject claim.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Reject; $z = 2.56$, $p$-value $\\approx 0.01 < 0.05$', correct: true },
      { label: 'B', text: 'Do not reject; 18 out of 500 is small', correct: false },
      { label: 'C', text: 'Do not reject; $\\hat{p} < 0.05$', correct: false },
      { label: 'D', text: 'Reject; $\\hat{p} > 0.02$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-09',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Variance of p-hat',
    text: '$p = 0.35$, $n = 200$. Find $\\text{Var}(\\hat{p})$ and $\\text{SD}(\\hat{p})$.',
    hints: ['$\\text{Var}(\\hat{p}) = \\frac{p(1-p)}{n}$.'],
    answer: '$\\text{Var}(\\hat{p}) = \\frac{0.35 \\times 0.65}{200} = \\frac{0.2275}{200} = 0.0011375$. $\\text{SD}(\\hat{p}) = \\sqrt{0.0011375} \\approx 0.0337$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\text{Var} \\approx 0.00114$, $\\text{SD} \\approx 0.0337$', correct: true },
      { label: 'B', text: '$\\text{Var} = 0.2275$, $\\text{SD} = 0.477$', correct: false },
      { label: 'C', text: '$\\text{Var} = 0.0337$, $\\text{SD} = 0.00114$', correct: false },
      { label: 'D', text: '$\\text{Var} = 0.35$, $\\text{SD} = 0.591$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L4-10',
    nodeId: 'sample-prop',
    level: 4,
    title: 'Interpreting SE',
    text: '$p = 0.5$, $n = 1600$. The SE of $\\hat{p}$ is $0.0125$. In repeated sampling, approximately $99.7\\%$ of $\\hat{p}$ values will fall within what range?',
    hints: ['$99.7\\%$ is within 3 SE of $p$.'],
    answer: '$0.5 \\pm 3(0.0125) = 0.5 \\pm 0.0375 = (0.4625, 0.5375)$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$(0.4625, 0.5375)$', correct: true },
      { label: 'B', text: '$(0.475, 0.525)$', correct: false },
      { label: 'C', text: '$(0.4875, 0.5125)$', correct: false },
      { label: 'D', text: '$(0.4250, 0.5750)$', correct: false },
    ],
  },

  // ===== LEVEL 5 (VCE Methods exam-hard) =====
  {
    id: 'sample-prop-L5-01',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Exact vs approximate',
    text: '$X \\sim \\text{Bi}(20, 0.5)$. Find the exact $\\Pr(\\hat{p} > 0.7) = \\Pr(X > 14)$ and compare with the normal approximation.',
    hints: ['$\\Pr(X > 14) = \\sum_{k=15}^{20}\\binom{20}{k}0.5^{20}$.'],
    answer: 'Exact: $\\Pr(X \\geq 15) = \\frac{\\binom{20}{15}+\\cdots+\\binom{20}{20}}{2^{20}} = \\frac{15504+4845+1140+190+20+1}{1048576} = \\frac{21700}{1048576} \\approx 0.0207$. Normal: $z = \\frac{0.7-0.5}{\\sqrt{0.25/20}} = \\frac{0.2}{0.1118} = 1.79$. $\\Pr \\approx 0.037$. The normal overestimates for small $n$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Exact $\\approx 0.021$; normal $\\approx 0.037$ (overestimates)', correct: true },
      { label: 'B', text: 'Both give $\\approx 0.021$', correct: false },
      { label: 'C', text: 'Exact $\\approx 0.037$; normal $\\approx 0.021$', correct: false },
      { label: 'D', text: 'Both give $\\approx 0.037$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-02',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Continuity correction',
    text: '$X \\sim \\text{Bi}(100, 0.4)$. Use the continuity correction to find $\\Pr(X \\geq 45)$ via the normal approximation.',
    hints: ['$\\Pr(X \\geq 45) \\approx \\Pr\\left(Z > \\frac{44.5-40}{\\sqrt{24}}\\right)$.'],
    answer: '$\\mu = 40$, $\\sigma = \\sqrt{24} \\approx 4.899$. With CC: $z = \\frac{44.5-40}{4.899} \\approx 0.918$. $\\Pr(Z > 0.918) \\approx 0.179$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\approx 0.179$', correct: true },
      { label: 'B', text: '$\\approx 0.154$ (without CC)', correct: false },
      { label: 'C', text: '$\\approx 0.500$', correct: false },
      { label: 'D', text: '$\\approx 0.046$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-03',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Deriving the variance of p-hat',
    text: 'If $X \\sim \\text{Bi}(n, p)$ and $\\hat{p} = \\frac{X}{n}$, derive $\\text{Var}(\\hat{p})$.',
    hints: ['$\\text{Var}(\\hat{p}) = \\text{Var}\\left(\\frac{X}{n}\\right) = \\frac{1}{n^2}\\text{Var}(X)$.'],
    answer: '$\\text{Var}(\\hat{p}) = \\frac{1}{n^2}\\text{Var}(X) = \\frac{np(1-p)}{n^2} = \\frac{p(1-p)}{n}$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$\\frac{p(1-p)}{n}$', correct: true },
      { label: 'B', text: '$np(1-p)$', correct: false },
      { label: 'C', text: '$\\frac{p(1-p)}{n^2}$', correct: false },
      { label: 'D', text: '$\\frac{p}{n}$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-04',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Power of a test',
    text: '$H_0: p = 0.5$, $H_1: p = 0.6$, $n = 100$. Reject $H_0$ if $\\hat{p} > 0.58$. Find the power. Given $\\Pr(Z < -0.41) \\approx 0.341$.',
    hints: ['Power $= \\Pr(\\hat{p} > 0.58 | p = 0.6)$.'],
    answer: 'Under $H_1$: SE $= \\sqrt{\\frac{0.24}{100}} = 0.049$. $z = \\frac{0.58-0.6}{0.049} = -0.41$. Power $= \\Pr(Z > -0.41) = 1 - 0.341 = 0.659$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.659$', correct: true },
      { label: 'B', text: '$0.341$', correct: false },
      { label: 'C', text: '$0.050$', correct: false },
      { label: 'D', text: '$0.950$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-05',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Finding critical value',
    text: '$H_0: p = 0.4$, one-sided test at $\\alpha = 0.05$, $n = 250$. Find the critical value $\\hat{p}_c$ such that $\\Pr(\\hat{p} > \\hat{p}_c | p = 0.4) = 0.05$.',
    hints: ['$\\hat{p}_c = p + z_{0.95} \\times \\text{SE}$.'],
    answer: 'SE $= \\sqrt{\\frac{0.24}{250}} = 0.03098$. $\\hat{p}_c = 0.4 + 1.645(0.03098) = 0.4 + 0.051 = 0.451$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.451$', correct: true },
      { label: 'B', text: '$0.461$', correct: false },
      { label: 'C', text: '$0.440$', correct: false },
      { label: 'D', text: '$0.431$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-06',
    nodeId: 'sample-prop',
    level: 5,
    title: 'CLT proof sketch',
    text: 'The Central Limit Theorem states that $\\frac{\\hat{p} - p}{\\sqrt{p(1-p)/n}} \\to N(0,1)$ as $n \\to \\infty$. What is the name of this convergence?',
    hints: ['This is a type of probabilistic convergence.'],
    answer: 'This is convergence in distribution (also called weak convergence).',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Convergence in distribution', correct: true },
      { label: 'B', text: 'Almost sure convergence', correct: false },
      { label: 'C', text: 'Convergence in probability', correct: false },
      { label: 'D', text: 'Mean square convergence', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-07',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Two-sample z-test',
    text: 'Sample 1: $n_1 = 200$, $\\hat{p}_1 = 0.45$. Sample 2: $n_2 = 300$, $\\hat{p}_2 = 0.38$. Test $H_0: p_1 = p_2$ at $5\\%$. Given $\\Pr(Z < 1.63) \\approx 0.948$.',
    hints: ['Pooled $\\hat{p} = \\frac{90+114}{500} = 0.408$.'],
    answer: 'Pooled $\\hat{p} = 0.408$. SE $= \\sqrt{0.408 \\times 0.592 \\left(\\frac{1}{200}+\\frac{1}{300}\\right)} = \\sqrt{0.2415 \\times 0.00833} = \\sqrt{0.002013} \\approx 0.04487$. $z = \\frac{0.45-0.38}{0.04487} = 1.56$. Two-tailed $p$-value $= 2(1-0.941) \\approx 0.119 > 0.05$. Do not reject.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Do not reject; $z \\approx 1.56$, $p$-value $\\approx 0.12 > 0.05$', correct: true },
      { label: 'B', text: 'Reject; the proportions differ', correct: false },
      { label: 'C', text: 'Reject; $z > 1$', correct: false },
      { label: 'D', text: 'Do not reject; $\\hat{p}_1 > \\hat{p}_2$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-08',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Delta method application',
    text: 'If $\\hat{p} \\sim N(p, \\frac{p(1-p)}{n})$ approximately, find the approximate distribution of $g(\\hat{p}) = \\ln\\left(\\frac{\\hat{p}}{1-\\hat{p}}\\right)$ (log-odds).',
    hints: ['Delta method: $g(\\hat{p}) \\approx N\\left(g(p), [g\'(p)]^2 \\frac{p(1-p)}{n}\\right)$.'],
    answer: '$g\'(p) = \\frac{1}{p(1-p)}$. $\\text{Var}(g(\\hat{p})) \\approx \\frac{1}{[p(1-p)]^2} \\cdot \\frac{p(1-p)}{n} = \\frac{1}{np(1-p)}$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$N\\left(\\ln\\frac{p}{1-p},\\; \\frac{1}{np(1-p)}\\right)$', correct: true },
      { label: 'B', text: '$N\\left(\\ln\\frac{p}{1-p},\\; \\frac{p(1-p)}{n}\\right)$', correct: false },
      { label: 'C', text: '$N\\left(p,\\; \\frac{1}{np(1-p)}\\right)$', correct: false },
      { label: 'D', text: '$N\\left(0,\\; \\frac{1}{n}\\right)$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-09',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Stratified sampling effect',
    text: 'A population has two strata: Stratum 1 ($N_1 = 600$, $p_1 = 0.3$) and Stratum 2 ($N_2 = 400$, $p_2 = 0.7$). A proportionally stratified sample of $n = 100$ is taken. Find $\\text{Var}(\\hat{p}_{\\text{strat}})$.',
    hints: ['$n_1 = 60$, $n_2 = 40$. $\\text{Var} = w_1^2 \\frac{p_1 q_1}{n_1} + w_2^2 \\frac{p_2 q_2}{n_2}$.'],
    answer: '$w_1 = 0.6$, $w_2 = 0.4$. $\\text{Var} = 0.36 \\times \\frac{0.21}{60} + 0.16 \\times \\frac{0.21}{40} = 0.36 \\times 0.0035 + 0.16 \\times 0.00525 = 0.00126 + 0.00084 = 0.0021$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$0.0021$', correct: true },
      { label: 'B', text: '$0.0042$', correct: false },
      { label: 'C', text: '$0.0046$', correct: false },
      { label: 'D', text: '$0.021$', correct: false },
    ],
  },
  {
    id: 'sample-prop-L5-10',
    nodeId: 'sample-prop',
    level: 5,
    title: 'Exam multi-step question',
    text: 'A polling company wants $\\Pr(|\\hat{p} - p| < 0.03) \\geq 0.99$ for any $p$. Find the required sample size.',
    hints: ['Use $p = 0.5$ (worst case) and $z_{0.995} = 2.576$.'],
    answer: '$2.576 \\times \\sqrt{\\frac{0.25}{n}} \\leq 0.03$. $\\sqrt{\\frac{0.25}{n}} \\leq 0.01164$. $\\frac{0.25}{n} \\leq 0.0001356$. $n \\geq \\frac{0.25}{0.0001356} = 1843.3$. So $n = 1844$.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: '$1844$', correct: true },
      { label: 'B', text: '$1843$', correct: false },
      { label: 'C', text: '$1068$', correct: false },
      { label: 'D', text: '$2401$', correct: false },
    ],
  },
];

export default questions;
