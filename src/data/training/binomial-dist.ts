import type { TrainingQuestion } from './types';

const questions: TrainingQuestion[] = [
  // Level 1
  {
    id: 'binomial-dist-l1-1',
    nodeId: 'binomial-dist',
    level: 1,
    title: 'Identifying a Binomial Setting',
    text: 'Which of the following is a binomial experiment?',
    hints: ['A binomial experiment has a fixed number of independent trials, each with two outcomes and the same probability of success.'],
    answer: 'Flipping a coin 10 times and counting heads.',
    marks: 1,
    isMultipleChoice: true,
    options: [
      { label: 'A', text: 'Rolling a die until you get a 6', correct: false },
      { label: 'B', text: 'Flipping a coin 10 times and counting heads', correct: true },
      { label: 'C', text: 'Drawing cards without replacement and counting aces', correct: false },
      { label: 'D', text: 'Measuring the heights of 20 students', correct: false },
    ],
  },
  {
    id: 'binomial-dist-l1-2',
    nodeId: 'binomial-dist',
    level: 1,
    title: 'Binomial Probability â€” Single Value',
    text: 'A fair coin is flipped 4 times. What is the probability of getting exactly 2 heads?',
    hints: ['Use $\\Pr(X = k) = \\binom{n}{k} p^k (1-p)^{n-k}$'],
    answer: '$\\binom{4}{2} \\left(\\frac{1}{2}\\right)^2 \\left(\\frac{1}{2}\\right)^2 = 6 \\times \\frac{1}{16} = \\frac{6}{16} = \\frac{3}{8}$',
    marks: 2,
  },
  {
    id: 'binomial-dist-l1-3',
    nodeId: 'binomial-dist',
    level: 1,
    title: 'Expected Value',
    text: 'If $X \\sim B(20, 0.3)$, find $E(X)$.',
    hints: ['For a binomial distribution, $E(X) = np$'],
    answer: '$E(X) = 20 \\times 0.3 = 6$',
    marks: 1,
  },
  {
    id: 'binomial-dist-l1-4',
    nodeId: 'binomial-dist',
    level: 1,
    title: 'Variance of Binomial',
    text: 'If $X \\sim B(50, 0.4)$, find the variance and standard deviation of $X$.',
    hints: ['$\\text{Var}(X) = np(1-p)$'],
    answer: '$\\text{Var}(X) = 50 \\times 0.4 \\times 0.6 = 12$. $\\text{SD}(X) = \\sqrt{12} = 2\\sqrt{3} \\approx 3.46$',
    marks: 2,
  },
  // Level 2
  {
    id: 'binomial-dist-l2-1',
    nodeId: 'binomial-dist',
    level: 2,
    title: 'At Least Probability',
    text: 'A multiple-choice test has 5 questions, each with 4 options (one correct). A student guesses randomly on every question. What is the probability of getting at least 2 correct?',
    hints: [
      '$\\Pr(X \\geq 2) = 1 - \\Pr(X=0) - \\Pr(X=1)$',
      'Here $n=5$, $p=0.25$',
    ],
    answer: '$\\Pr(X=0) = \\binom{5}{0}(0.25)^0(0.75)^5 = 0.2373$. $\\Pr(X=1) = \\binom{5}{1}(0.25)^1(0.75)^4 = 5 \\times 0.25 \\times 0.3164 = 0.3955$. $\\Pr(X \\geq 2) = 1 - 0.2373 - 0.3955 = 0.3672$',
    marks: 3,
  },
  {
    id: 'binomial-dist-l2-2',
    nodeId: 'binomial-dist',
    level: 2,
    title: 'Finding n',
    text: 'The probability that a machine produces a defective item is 0.1. How many items must be produced so that the probability of at least one defective is greater than 0.95?',
    hints: [
      '$\\Pr(X \\geq 1) > 0.95$ means $\\Pr(X = 0) < 0.05$',
      '$0.9^n < 0.05$, so $n > \\frac{\\ln 0.05}{\\ln 0.9}$',
    ],
    answer: '$0.9^n < 0.05 \\Rightarrow n > \\frac{\\ln 0.05}{\\ln 0.9} = \\frac{-2.996}{-0.1054} \\approx 28.4$. So $n = 29$.',
    marks: 3,
  },
  {
    id: 'binomial-dist-l2-3',
    nodeId: 'binomial-dist',
    level: 2,
    title: 'Cumulative Binomial Probability',
    text: 'If $X \\sim B(8, 0.5)$, find $\\Pr(3 \\leq X \\leq 5)$.',
    hints: ['Compute $\\Pr(X=3) + \\Pr(X=4) + \\Pr(X=5)$'],
    answer: '$\\Pr(X=3) = \\binom{8}{3}(0.5)^8 = \\frac{56}{256}$, $\\Pr(X=4) = \\frac{70}{256}$, $\\Pr(X=5) = \\frac{56}{256}$. Total $= \\frac{182}{256} = \\frac{91}{128} \\approx 0.7109$',
    marks: 3,
  },
  {
    id: 'binomial-dist-l2-4',
    nodeId: 'binomial-dist',
    level: 2,
    title: 'Mode of a Binomial',
    text: 'If $X \\sim B(10, 0.7)$, find the most likely value of $X$ (the mode).',
    hints: ['The mode of $B(n,p)$ is $\\lfloor (n+1)p \\rfloor$ or $\\lfloor (n+1)p \\rfloor - 1$'],
    answer: '$(n+1)p = 11 \\times 0.7 = 7.7$, so the mode is $\\lfloor 7.7 \\rfloor = 7$.',
    marks: 2,
  },
  // Level 3
  {
    id: 'binomial-dist-l3-1',
    nodeId: 'binomial-dist',
    level: 3,
    title: 'Binomial Hypothesis Testing',
    text: 'A coin is suspected of being biased. In 20 flips, 15 heads are observed. Using $X \\sim B(20, 0.5)$, find $\\Pr(X \\geq 15)$. At a 5% significance level, is there evidence the coin is biased towards heads?',
    hints: [
      'Compute $\\Pr(X \\geq 15) = \\sum_{k=15}^{20} \\binom{20}{k} (0.5)^{20}$',
      'Compare with 0.05',
    ],
    answer: '$\\Pr(X \\geq 15) = \\frac{1}{2^{20}}\\left[\\binom{20}{15}+\\binom{20}{16}+\\binom{20}{17}+\\binom{20}{18}+\\binom{20}{19}+\\binom{20}{20}\\right] = \\frac{15504+4845+1140+190+20+1}{1048576} = \\frac{21700}{1048576} \\approx 0.0207$. Since $0.0207 < 0.05$, there is significant evidence the coin is biased towards heads.',
    marks: 4,
  },
  {
    id: 'binomial-dist-l3-2',
    nodeId: 'binomial-dist',
    level: 3,
    title: 'Sum of Two Binomials',
    text: 'Let $X \\sim B(5, 0.3)$ and $Y \\sim B(7, 0.3)$ be independent. Find $E(X + Y)$ and $\\text{Var}(X + Y)$.',
    hints: [
      'For independent random variables, expectations and variances add',
      '$X + Y \\sim B(12, 0.3)$',
    ],
    answer: '$E(X+Y) = 5(0.3) + 7(0.3) = 1.5 + 2.1 = 3.6$. $\\text{Var}(X+Y) = 5(0.3)(0.7) + 7(0.3)(0.7) = 1.05 + 1.47 = 2.52$',
    marks: 4,
  },
  {
    id: 'binomial-dist-l3-3',
    nodeId: 'binomial-dist',
    level: 3,
    title: 'Finding p from Given Information',
    text: 'If $X \\sim B(n, p)$ with $E(X) = 6$ and $\\text{Var}(X) = 4.2$, find $n$ and $p$.',
    hints: [
      '$E(X) = np = 6$ and $\\text{Var}(X) = np(1-p) = 4.2$',
      'Divide variance by mean to find $1-p$',
    ],
    answer: '$\\frac{\\text{Var}(X)}{E(X)} = 1-p = \\frac{4.2}{6} = 0.7$, so $p = 0.3$. Then $n = \\frac{6}{0.3} = 20$.',
    marks: 4,
  },
  // Level 4
  {
    id: 'binomial-dist-l4-1',
    nodeId: 'binomial-dist',
    level: 4,
    title: 'Conditional Binomial',
    text: 'Let $X \\sim B(10, 0.5)$. Find $\\Pr(X = 6 | X \\geq 5)$.',
    hints: [
      '$\\Pr(X=6|X \\geq 5) = \\frac{\\Pr(X=6)}{\\Pr(X \\geq 5)}$',
      'By symmetry, $\\Pr(X \\geq 5) = \\Pr(X \\leq 5)$ and $\\Pr(X=5) = \\binom{10}{5}/2^{10}$',
    ],
    answer: '$\\Pr(X=6) = \\binom{10}{6}/1024 = 210/1024$. $\\Pr(X \\geq 5) = \\frac{1}{2} + \\frac{1}{2}\\Pr(X=5) = \\frac{1}{2} + \\frac{252}{2048} = \\frac{1024+252}{2048} = \\frac{638}{1024}$. $\\Pr(X=6|X\\geq 5) = \\frac{210}{638} = \\frac{105}{319} \\approx 0.329$',
    marks: 5,
  },
  {
    id: 'binomial-dist-l4-2',
    nodeId: 'binomial-dist',
    level: 4,
    title: 'Maximising Probability',
    text: 'For $X \\sim B(6, p)$, find the value of $p$ that maximises $\\Pr(X = 2)$.',
    hints: [
      '$\\Pr(X=2) = \\binom{6}{2} p^2 (1-p)^4$',
      'Take the derivative with respect to $p$ and set it to zero',
    ],
    answer: '$f(p) = 15p^2(1-p)^4$. $f\'(p) = 15[2p(1-p)^4 - 4p^2(1-p)^3] = 15p(1-p)^3[2(1-p) - 4p] = 15p(1-p)^3(2-6p)$. Setting $f\'(p)=0$: $p=0$, $p=1$, or $p = \\frac{1}{3}$. The maximum is at $p = \\frac{1}{3}$.',
    marks: 5,
  },
  {
    id: 'binomial-dist-l4-3',
    nodeId: 'binomial-dist',
    level: 4,
    title: 'Generating Function Approach',
    text: 'Using the probability generating function $G(t) = (0.7 + 0.3t)^8$ for $X \\sim B(8, 0.3)$, find $E(X(X-1))$ and hence $E(X^2)$.',
    hints: [
      '$E(X(X-1)) = G\'\'(1)$',
      '$E(X^2) = E(X(X-1)) + E(X)$',
    ],
    answer: '$G\'(t) = 8 \\times 0.3(0.7+0.3t)^7$. $G\'\'(t) = 8 \\times 7 \\times 0.3^2(0.7+0.3t)^6$. $G\'\'(1) = 56 \\times 0.09 \\times 1 = 5.04$. $E(X) = 8 \\times 0.3 = 2.4$. $E(X^2) = 5.04 + 2.4 = 7.44$.',
    marks: 5,
  },
  // Level 5
  {
    id: 'binomial-dist-l5-1',
    nodeId: 'binomial-dist',
    level: 5,
    title: 'Binomial Ratio Identity',
    text: 'For $X \\sim B(n, p)$, show that $\\frac{\\Pr(X=k+1)}{\\Pr(X=k)} = \\frac{(n-k)p}{(k+1)(1-p)}$ and use this to find all modes of $B(12, \\frac{1}{3})$.',
    hints: [
      'Divide $\\binom{n}{k+1}p^{k+1}(1-p)^{n-k-1}$ by $\\binom{n}{k}p^k(1-p)^{n-k}$',
      'The mode satisfies $\\Pr(X=k+1) \\geq \\Pr(X=k)$ transitioning to $<$',
    ],
    answer: 'Ratio: $\\frac{\\binom{n}{k+1}}{\\binom{n}{k}} \\cdot \\frac{p}{1-p} = \\frac{n-k}{k+1} \\cdot \\frac{p}{1-p}$. For $B(12, 1/3)$: ratio $= \\frac{(12-k)}{2(k+1)}$. Set ratio $\\geq 1$: $12-k \\geq 2k+2 \\Rightarrow k \\leq \\frac{10}{3} \\approx 3.33$. So $\\Pr$ increases for $k \\leq 3$ and decreases for $k \\geq 4$. The unique mode is $k = 4$.',
    marks: 6,
  },
  {
    id: 'binomial-dist-l5-2',
    nodeId: 'binomial-dist',
    level: 5,
    title: 'Binomial Distribution Proof',
    text: 'Prove that $\\sum_{k=0}^{n} k^2 \\binom{n}{k} p^k (1-p)^{n-k} = np[(n-1)p + 1]$ by using the identity $k^2 = k(k-1) + k$.',
    hints: [
      'Split into $E(X(X-1)) + E(X)$',
      '$E(X(X-1)) = n(n-1)p^2$ can be proved by the absorption identity $k(k-1)\\binom{n}{k} = n(n-1)\\binom{n-2}{k-2}$',
    ],
    answer: '$E(X^2) = E(X(X-1)) + E(X)$. For $E(X(X-1))$: $\\sum k(k-1)\\binom{n}{k}p^k q^{n-k} = n(n-1)p^2 \\sum_{k=2}^{n}\\binom{n-2}{k-2}p^{k-2}q^{n-k} = n(n-1)p^2(p+q)^{n-2} = n(n-1)p^2$. So $E(X^2) = n(n-1)p^2 + np = np[(n-1)p + 1]$. $\\blacksquare$',
    marks: 6,
  },
];

export default questions;
